{% extends "base.html" %}

{% block title %}模型管理 - 开源组件包安全检测平台{% endblock %}

{% block content %}
<div class="container">
    <h2>模型管理</h2>
    
    {% with messages = get_flashed_messages() %}
        {% if messages %}
            {% for message in messages %}
                <div class="flash-message flash-info">{{ message }}</div>
            {% endfor %}
        {% endif %}
    {% endwith %}
    
    <div class="card mb-4" style="background: white; border-radius: 10px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); margin-bottom: 20px;">
        <div class="card-header" style="padding: 15px 20px; border-bottom: 1px solid #eee;">
            <h4>当前模型状态</h4>
        </div>
        <div class="card-body" style="padding: 20px;">
            {% if model_info.exists %}
                <p><strong>模型文件：</strong> 已存在</p>
                <p><strong>最后修改时间：</strong> {{ model_info.last_modified }}</p>
                <p><strong>文件大小：</strong> {{ (model_info.size / 1024)|round(2) }} KB</p>
            {% else %}
                <p><strong>模型文件：</strong> 不存在</p>
            {% endif %}
        </div>
    </div>
    
    <div class="card" style="background: white; border-radius: 10px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); margin-bottom: 20px;">
        <div class="card-header" style="padding: 15px 20px; border-bottom: 1px solid #eee;">
            <h4>模型操作</h4>
        </div>
        <div class="card-body" style="padding: 20px;">
            <form method="POST" action="{{ url_for('admin.model_management') }}">
                <div style="margin-bottom: 15px;">
                    <label for="model_type" style="display: block; margin-bottom: 8px;">选择模型类型</label>
                    <select id="model_type" name="model_type" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px;">
                        <option value="xgboost">XGBoost</option>
                        <option value="randomforest">Random Forest</option>
                    </select>
                </div>
                
                <div style="margin-bottom: 15px;">
                    <button type="submit" name="action" value="retrain" class="btn btn-primary" style="margin-right: 10px;">
                        重新训练模型
                    </button>
                    <button type="submit" name="action" value="switch" class="btn btn-outline" style="background: #f8f9fa; color: #333;">
                        切换模型类型
                    </button>
                </div>
            </form>
        </div>
    </div>
    
    <div class="card" style="background: white; border-radius: 10px; box-shadow: 0 4px 20px rgba(0,0,0,0.1);">
        <div class="card-header" style="padding: 15px 20px; border-bottom: 1px solid #eee;">
            <h4>模型说明</h4>
        </div>
        <div class="card-body" style="padding: 20px;">
            <h5>XGBoost模型</h5>
            <ul>
                <li>基于梯度提升树的集成学习模型</li>
                <li>适合处理非线性关系</li>
                <li>训练速度较快</li>
                <li>对异常值较为鲁棒</li>
            </ul>
            
            <h5>Random Forest模型</h5>
            <ul>
                <li>基于决策树的集成学习模型</li>
                <li>训练速度快</li>
                <li>不容易过拟合</li>
                <li>适合处理高维特征</li>
            </ul>
        </div>
    </div>
</div>
{% endblock %} 