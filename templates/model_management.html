{% extends "base.html" %}

{% block content %}
<div class="container mt-4">
    <h2>模型管理</h2>
    
    {% with messages = get_flashed_messages() %}
        {% if messages %}
            {% for message in messages %}
                <div class="alert alert-info">{{ message }}</div>
            {% endfor %}
        {% endif %}
    {% endwith %}
    
    <div class="card mb-4">
        <div class="card-header">
            <h4>当前模型状态</h4>
        </div>
        <div class="card-body">
            {% if model_info.exists %}
                <p><strong>模型文件：</strong> 已存在</p>
                <p><strong>最后修改时间：</strong> {{ model_info.last_modified }}</p>
                <p><strong>文件大小：</strong> {{ (model_info.size / 1024)|round(2) }} KB</p>
            {% else %}
                <p><strong>模型文件：</strong> 不存在</p>
            {% endif %}
        </div>
    </div>
    
    <div class="card">
        <div class="card-header">
            <h4>模型操作</h4>
        </div>
        <div class="card-body">
            <form method="POST" action="{{ url_for('model_management') }}">
                <div class="mb-3">
                    <label for="model_type" class="form-label">选择模型类型</label>
                    <select class="form-select" id="model_type" name="model_type">
                        <option value="xgboost">XGBoost</option>
                        <option value="randomforest">Random Forest</option>
                    </select>
                </div>
                
                <div class="mb-3">
                    <button type="submit" name="action" value="retrain" class="btn btn-primary">
                        重新训练模型
                    </button>
                    <button type="submit" name="action" value="switch" class="btn btn-secondary">
                        切换模型类型
                    </button>
                </div>
            </form>
        </div>
    </div>
    
    <div class="card mt-4">
        <div class="card-header">
            <h4>模型说明</h4>
        </div>
        <div class="card-body">
            <h5>XGBoost模型</h5>
            <ul>
                <li>基于梯度提升树的集成学习模型</li>
                <li>适合处理非线性关系</li>
                <li>训练速度较快</li>
                <li>对异常值较为鲁棒</li>
            </ul>
            
            <h5>Random Forest模型</h5>
            <ul>
                <li>基于决策树的集成学习模型</li>
                <li>训练速度快</li>
                <li>不容易过拟合</li>
                <li>适合处理高维特征</li>
            </ul>
        </div>
    </div>
</div>
{% endblock %} 